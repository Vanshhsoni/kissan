<!DOCTYPE html>
<html lang="ml-IN">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Lucide Icons Script -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manjari:wght@400;700&display=swap" rel="stylesheet">
  <title>കർഷകൻ - ലോഗിൻ</title>
  <style>
    /* Apply Manjari font for authentic Malayalam script rendering */
    html, body {
      font-family: 'Manjari', sans-serif;
    }

    /* A professional, deep green gradient */
    .bg-professional-gradient {
      background-color: #064e3b; /* fallback */
      background-image: linear-gradient(145deg, #064e3b 0%, #052e16 100%);
      position: relative;
      overflow: hidden;
    }
  </style>
</head>
<body class="bg-professional-gradient flex items-center justify-center min-h-screen p-4">

  <!-- NEW: Subtle crop silhouette at the bottom -->
  <div class="absolute bottom-0 left-0 w-full h-auto opacity-20 z-0">
    <svg viewBox="0 0 1440 128" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M1440 56.8857V128H0V56.8857C0 56.8857 106.333 30.1833 214 33.3151C321.667 36.4468 362.5 89.3308 506.5 91.5544C650.5 93.778 721.5 13.0088 854 13.0088C986.5 13.0088 1069.17 84.0934 1215.5 80.5375C1361.83 76.9816 1440 56.8857 1440 56.8857Z" fill="white"/>
    </svg>
  </div>
  
  <div class="bg-white/95 backdrop-blur-sm shadow-xl rounded-2xl p-8 w-full max-w-md transition-shadow duration-300 hover:shadow-2xl z-10">
    
    <!-- Header Section -->
    <div class="text-center mb-6">
      <div class="inline-block p-4 bg-emerald-600 rounded-full mb-4">
        <!-- Main Coconut Tree Icon -->
       <!-- NEW: Professional Crop Icon -->
       <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-leaf-icon lucide-leaf"><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></svg>
      </div>
      
      <h1 class="text-3xl font-bold text-slate-800">
        Kissan Mitra
      </h1>
      <p class="text-slate-500 mt-2">നിങ്ങളുടെ ഡിജിറ്റൽ കാർഷിക സഹായി</p>
    </div>

    <!-- Form -->
    <form method="post" class="space-y-6" id="loginForm">
      {% csrf_token %}
      
      <div>
        <label for="mobile" class="block mb-2 text-sm font-bold text-slate-700">മൊബൈൽ നമ്പർ നൽകുക</label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
            <span class="text-slate-500 font-semibold">+91</span>
          </div>
          <input 
            type="tel" 
            name="mobile" 
            id="mobile"
            class="w-full bg-slate-100 border-2 border-slate-200 rounded-lg p-3.5 pl-14 focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 transition duration-200 text-lg"
            placeholder="98765 43210" 
            pattern="[0-9]{10}"
            maxlength="10"
            minlength="10"
            required
            autocomplete="tel"
            inputmode="numeric"
          >
          <!-- Validation Icon -->
          <div id="validationIcon" class="absolute inset-y-0 right-0 pr-3.5 flex items-center pointer-events-none hidden">
            <i data-lucide="check-circle" class="w-5 h-5 text-emerald-500"></i>
          </div>
          <div id="errorIcon" class="absolute inset-y-0 right-0 pr-3.5 flex items-center pointer-events-none hidden">
            <i data-lucide="alert-circle" class="w-5 h-5 text-red-500"></i>
          </div>
        </div>
        <!-- Error Message -->
        <p id="errorMessage" class="text-red-500 text-sm mt-2 hidden">കൃത്യമായി 10 അക്കങ്ങൾ നൽകുക</p>
        <!-- Character Counter -->
        <p id="charCounter" class="text-slate-500 text-xs mt-1 text-right">0 / 10 അക്കങ്ങൾ</p>
      </div>

      <button 
        type="submit"
        id="submitBtn"
        class="w-full bg-emerald-600 text-white rounded-lg py-3.5 font-bold text-lg hover:bg-emerald-700 transition-colors duration-300 focus:outline-none focus-visible:ring-4 focus-visible:ring-emerald-300 flex items-center justify-center gap-2 group disabled:bg-slate-400 disabled:cursor-not-allowed"
        disabled
      >
        <span>തുടരുക</span>
        <!-- Lucide Arrow Icon -->
        <i data-lucide="arrow-right" class="w-5 h-5 transform group-hover:translate-x-1 transition-transform"></i>
      </button>
    </form>

    <!-- Professional Features Section with Lucide Icons -->
    <div class="mt-8 pt-6 border-t border-slate-200">
      <div class="grid grid-cols-3 gap-4 text-center">
        <!-- Price Icon -->
        <div class="group flex flex-col items-center">
          <i data-lucide="tag" class="w-8 h-8 text-slate-400 group-hover:text-emerald-600 transition-colors"></i>
          <p class="text-xs text-slate-600 font-semibold mt-2">വിപണി വില</p>
        </div>
        <!-- Weather Icon -->
        <div class="group flex flex-col items-center">
          <i data-lucide="cloudy" class="w-8 h-8 text-slate-400 group-hover:text-emerald-600 transition-colors"></i>
          <p class="text-xs text-slate-600 font-semibold mt-2">കാലാവസ്ഥ</p>
        </div>
        <!-- Crop Info Icon -->
        <div class="group flex flex-col items-center">
          <i data-lucide="sprout" class="w-8 h-8 text-slate-400 group-hover:text-emerald-600 transition-colors"></i>
          <p class="text-xs text-slate-600 font-semibold mt-2">വിള വിവരം</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- This script finds all elements with data-lucide attribute and replaces them with SVG icons -->
  <script>
    lucide.createIcons();
    
    // Mobile number validation script
    const mobileInput = document.getElementById('mobile');
    const submitBtn = document.getElementById('submitBtn');
    const errorMessage = document.getElementById('errorMessage');
    const charCounter = document.getElementById('charCounter');
    const validationIcon = document.getElementById('validationIcon');
    const errorIcon = document.getElementById('errorIcon');
    const form = document.getElementById('loginForm');
    
    // Only allow numeric input
    mobileInput.addEventListener('input', function(e) {
      // Remove any non-numeric characters
      this.value = this.value.replace(/[^0-9]/g, '');
      
      // Update character counter
// Update character counter
const length = this.value.length;
charCounter.textContent = `${length} / 10 അക്കങ്ങൾ`;

      
      // Validate and update UI
      validateMobileNumber();
    });
    
    // Prevent non-numeric key presses
    mobileInput.addEventListener('keypress', function(e) {
      // Allow backspace, delete, tab, escape, enter
      if ([8, 9, 27, 13].indexOf(e.keyCode) !== -1 ||
          // Allow Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X
          (e.keyCode === 65 && e.ctrlKey === true) ||
          (e.keyCode === 67 && e.ctrlKey === true) ||
          (e.keyCode === 86 && e.ctrlKey === true) ||
          (e.keyCode === 88 && e.ctrlKey === true)) {
        return;
      }
      // Ensure that it is a number and stop the keypress
      if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
        e.preventDefault();
      }
    });
    
    // Prevent paste of non-numeric content
    mobileInput.addEventListener('paste', function(e) {
      e.preventDefault();
      const paste = (e.clipboardData || window.clipboardData).getData('text');
      const numbersOnly = paste.replace(/[^0-9]/g, '');
      
      // Only paste if it doesn't exceed 10 digits
      if (numbersOnly.length <= 10) {
        this.value = numbersOnly;
        validateMobileNumber();
      }
    });
    
    function validateMobileNumber() {
      const length = mobileInput.value.length;
      
      if (length === 10) {
        // Valid number
        mobileInput.classList.remove('border-red-500');
        mobileInput.classList.add('border-emerald-500');
        errorMessage.classList.add('hidden');
        submitBtn.disabled = false;
        validationIcon.classList.remove('hidden');
        errorIcon.classList.add('hidden');
        charCounter.classList.remove('text-red-500');
        charCounter.classList.add('text-emerald-500');
      } else if (length > 0) {
        // Invalid length
        mobileInput.classList.add('border-red-500');
        mobileInput.classList.remove('border-emerald-500');
        errorMessage.classList.remove('hidden');
        submitBtn.disabled = true;
        validationIcon.classList.add('hidden');
        errorIcon.classList.remove('hidden');
        charCounter.classList.add('text-red-500');
        charCounter.classList.remove('text-emerald-500');
      } else {
        // Empty field
        mobileInput.classList.remove('border-red-500', 'border-emerald-500');
        errorMessage.classList.add('hidden');
        submitBtn.disabled = true;
        validationIcon.classList.add('hidden');
        errorIcon.classList.add('hidden');
        charCounter.classList.remove('text-red-500', 'text-emerald-500');
      }
      
      // Re-render icons after DOM changes
      lucide.createIcons();
    }
    
    // Form submission validation
    form.addEventListener('submit', function(e) {
      if (mobileInput.value.length !== 10) {
        e.preventDefault();
        errorMessage.classList.remove('hidden');
        mobileInput.focus();
      }
    });
    
    // Initial validation on page load
    validateMobileNumber();
  </script>
</body>
</html>